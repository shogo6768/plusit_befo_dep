{% extends 'base.html' %}
{% load static %}


{% block customcss %}
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <link rel="stylesheet" href="{% static 'reset.css' %}">
{% endblock customcss %}

{% block sidenav %}
<nav class="category-menu">
    <i class="fas fa-times fa-lg"></i>
    <ul class="category-menu__main">
        {% for category in allcats %}
        <li class="category-menu__item">
           <span class="category__title">{{category}}</span> 
        <ul class="sub-category-menu__main">
            <li class="sub-category-menu__item">
                {% for subcategory in category.children.all %}
                <a class="category-menu__link" href="{% url 'category' subcategory.slug %}">
                    {{subcategory}}
                </a>
                {% endfor %}
            </li>
        </ul>
        </li>
        {% endfor %}
    </ul>
</nav>
<nav class="mobile-menu">
    <i class="fas fa-times fa-lg"></i>
    <ul class="mobile-menu__main">
        <li class="mobile-menu__item">
            <a class="mobile-menu__link" href="{%url 'all_contents'%}">
                <span class="mobile-main__title">コンテンツ一覧</span>
            </a>
        </li>
        <li class="mobile-menu__item">
            <a class="mobile-menu__link" href="{%url 'ranking'%}">
                <span class="mobile-main__title">よく読まれている記事</span>
            </a>
        </li>
        
        <li class="mobile-menu__item">
            <a class="mobile-menu__link" href="#">
                <span class="mobile-main__title">カテゴリー一覧</span>
            </a>
            <ul class="category-menu__main">
                {% for category in allcats %}
                <li class="category-menu__item">
                   <span class="category__title">{{category}}</span> 
                <ul class="sub-category-menu__main">
                    <li class="sub-category-menu__item">
                        {% for subcategory in category.children.all %}
                        <a class="category-menu__link" href="{% url 'category' subcategory.slug %}">
                            {{subcategory}}
                        </a>
                        {% endfor %}
                    </li>
                </ul>
                </li>
                {% endfor %}
            </ul>
        </li>
        <li class="mobile-menu__item">
            <a class="mobile-menu__link" href="#">
                <span class="mobile-main__title">検索</span>
            </a>
            <div class="mobile-search">
                <form action="{% url 'search' %}" method="GET">
                    <input type="search" style="font-size: 13px; width: 180px;" placeholder="キーワードで検索" name="key_search" id="q_in_topbar" value="" autocomplete="off">
                    <button type="submit" ><i class="fas fa-search"></i></button>
                </form>
            </div>
        </li>
        {% if user.id %}
        <li class="mobile-menu__item">
            <a class="mobile-menu__link" href="{% url 'logout' %} ">
                <span class="mobile-main__title">ログアウト</span>
            </a>
        </li>
        {% else %}
        <li class="mobile-menu__item">
            <a class="mobile-menu__link" href="'{% url 'login' %} ">
                <span class="mobile-main__title">ログイン</span>
            </a>
        </li>
        {% endif %}
    </ul>
</nav>
{% endblock sidenav%}

{% block customjs %}
<script src="{% static 'main.js' %}"></script>
{% endblock customjs %}